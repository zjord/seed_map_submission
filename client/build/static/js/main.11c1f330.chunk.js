(this.webpackJsonpseed_map=this.webpackJsonpseed_map||[]).push([[0],{73:function(e,t){},74:function(e,t,n){},75:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n(11),i=n.n(o),s=n(38),r=n(13),l=n(14),c=n(17),d=n(16),h=n(0),m=function(){return Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:"Colour"}),Object(h.jsx)("th",{children:"Latitude"}),Object(h.jsx)("th",{children:"Longitude"}),Object(h.jsx)("th",{children:"Time"}),Object(h.jsx)("th",{children:"Image"}),Object(h.jsx)("th",{children:"Delete row"})]})})},u=function(e){var t=e.dData.map((function(t,n){return Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:t.col}),Object(h.jsx)("td",{children:t.lat}),Object(h.jsx)("td",{children:t.lon}),Object(h.jsx)("td",{children:t.time}),Object(h.jsx)("td",{children:Object(h.jsx)("img",{src:URL.createObjectURL(t.img),alt:"ImgSubmission",height:100})}),Object(h.jsx)("td",{children:Object(h.jsx)("button",{onClick:function(){return e.remove_dData(n)},children:"X"})})]},n)}));return Object(h.jsx)("tbody",{children:t})},b=function(e){var t=e.dData,n=e.remove_dData;return Object(h.jsxs)("table",{children:[Object(h.jsx)(m,{}),Object(h.jsx)(u,{dData:t,remove_dData:n})]})},j=n(36),p=n(15),g=n(22),f=n.n(g),x=n(23),O=n.n(x),y=n(8),v=n.n(y),w=function(e){Object(c.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).initialState={col:"",lat:"",lon:"",time:"",autoloc:"",temp:"",hum:""},e.state=e.initialState,e.handleDataChange=function(t){var n=t.target,a=n.name,o=n.value;e.setState(Object(p.a)({},a,o))},e.handleImgChange=function(t){var n=t.target.files[0];e.setState({img:n})},e.handleKeypress=function(t){13===t.keyCode&&e.submitForm()},e.grabLocation=function(){navigator.geolocation.getCurrentPosition((function(t){v.a.fire({title:"Location grabbed!",confirmButtonText:"Nice!",icon:"success"}).then((function(){e.setState({lat:t.coords.latitude,lon:t.coords.longitude,autoloc:"Auto"})}))}),(function(t){v.a.fire({title:"Error!",html:"Pro Tip: Reset your device's permissions and reload the website.<br>If that fails, please input the coordinates manually",confirmButtonText:"Aw man",footer:"Pro Tip 2: Use Google Maps to find the approx coordinates",icon:"error"}).then((function(){console.log("Error while grabbing user's loc:"),console.log(t),e.setState({autoloc:"Manual"})}))}))},e.submitForm=function(){var t=Object(j.a)(f.a.mark((function t(n){var a,o;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==(e.state.lat&&e.state.lon&&e.state.img)){t.next=4;break}v.a.fire({title:"Warning",text:"You missed out vital info!",confirmButtonText:"Let me double check",icon:"warning"}).then(),t.next=15;break;case 4:return n.preventDefault(),e.props.handleSubmit(e.state),a=[],"39f0b3d543c797a3eeecd77ddd38cf51",o="https://api.openweathermap.org/data/2.5/weather?units=metric&lat=".concat(e.state.lat,"&lon=").concat(e.state.lon,"&appid=").concat("39f0b3d543c797a3eeecd77ddd38cf51"),console.log(o),t.next=12,O.a.get(o).then((function(t){console.log(t.data),e.setState({temp:t.data.main.temp,hum:t.data.main.humidity}),a={col:e.state.col,lat:e.state.lat,lon:e.state.lon,time:e.state.time,autoloc:e.state.autoloc,temp:e.state.temp,hum:e.state.hum}})).catch((function(e){return console.log(e)}));case 12:return console.log(a),t.next=15,O.a.post("/submit",{inst:a}).then((function(e){console.log(e),console.log(e.data),"SUCCESS"===e.data?v.a.fire({title:"Entry submitted",html:"Thank you for your submission! <br> You can find your own pin in the map below <br> (Reload the website to see changes)",icon:"success"}).then():v.a.fire({title:"Server connection went wrong",html:"Try again later",icon:"warning"}).then()}));case 15:e.setState(e.initialState),document.getElementById("fileB").value=null;case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.state,t=e.col,n=e.lat,a=e.lon,o=e.time;return Object(h.jsxs)("form",{action:"/submit",onSubmit:this.submitForm,children:[Object(h.jsx)("label",{htmlFor:"col",children:"Colour"}),Object(h.jsx)("input",{type:"text",name:"col",id:"col",value:t,onChange:this.handleDataChange,onKeyDown:this.handleKeypress}),Object(h.jsx)("label",{htmlFor:"lat",children:"Latitude"}),Object(h.jsx)("input",{type:"text",name:"lat",id:"lat",value:n,onChange:this.handleDataChange,onKeyDown:this.handleKeypress}),Object(h.jsx)("label",{htmlFor:"lon",children:"Longitude"}),Object(h.jsx)("input",{type:"text",name:"lon",id:"lon",value:a,onChange:this.handleDataChange,onKeyDown:this.handleKeypress}),Object(h.jsx)("input",{type:"button",name:"locB",value:"Use my location!",onClick:this.grabLocation}),Object(h.jsx)("label",{htmlFor:"time",children:"Time"}),Object(h.jsx)("input",{type:"time",name:"time",id:"time",value:o,onChange:this.handleDataChange,onKeyDown:this.handleKeypress}),Object(h.jsx)("label",{htmlFor:"img",children:"Image"}),Object(h.jsx)("input",{accept:"image/*",type:"file",id:"fileB",capture:"environment",onChange:this.handleImgChange}),Object(h.jsx)("input",{type:"button",value:"SUBMIT",onClick:this.submitForm})]})}}]),n}(a.Component),D=n.p+"static/media/jemilicious_logo.15e52c25.png",S=n.p+"static/media/dandelion_icon.9a95baa8.png",C=(n(73),n(78)),k=n(80),I=n(79),T=(n(35),n(37)),N=function(e){Object(c.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={dData:[],marker:[]},e.remove_dData=function(t){var n=e.state.dData.dData;e.setState({dData:n.filter((function(e,n){return n!==t}))})},e.handleSubmit=function(t){e.setState({dData:[].concat(Object(s.a)(e.state.dData),[t])})},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.state.dData;return Object(h.jsxs)("div",{className:"container",style:{"padding-top":"2em"},children:[Object(h.jsx)("img",{className:"img inline",src:D,alt:"logo"}),"    ",Object(h.jsx)("h1",{className:"small inline",children:"Dandelion Seed Mapping Project"}),"      ",Object(h.jsxs)("p",{className:"inline",children:["ZJORD, Imperial College 2021/22",Object(h.jsx)("br",{})]}),"     ",Object(h.jsx)("div",{className:"horizontal",style:{"margin-top":"1em","margin-bottom":"2em"}}),Object(h.jsx)("p",{style:{"margin-right":"1em","font-weight":"bold"},children:" ABOUT"}),Object(h.jsxs)("p",{style:{"margin-left":"1em","margin-right":"1em","margin-botton":"1em"},children:[" The goal of this website is to collect data from the general public about the location of dandelion seeds all released from our lab at Imperial College London.",Object(h.jsx)("br",{}),Object(h.jsx)("br",{})," Nature has invented ways many ways to fly however unlike the muscle based flight of animals, plants have developed clever structural designs to utilise wind. We want to track dandelion seeds by painting them a bright colour for you to find and input into this website."]}),Object(h.jsx)("a",{style:{margin:"2em"},href:"https://www.bfflab.org/research.html",className:"button",children:"READ MORE"}),Object(h.jsx)("p",{style:{"margin-left":"0.5em","margin-top":"1.5em","font-weight":"bold"},children:" INSTRUCTIONS"}),Object(h.jsx)("p",{style:{"margin-left":"2em","margin-right":"2em"},children:" If you have found a dandelion that is an unnatural colour, you have found one of the many dandelion seeds that we have released, use this website to upload a picture of the seed along with the time and location when you found it."}),Object(h.jsxs)("p",{style:{"margin-left":"3em"},children:["\u2023find a painted dandelion seed",Object(h.jsx)("br",{}),"\u2023take a photo of seed",Object(h.jsx)("br",{}),"\u2023submit the photo along with the location and time of where and when you found the seed"]}),Object(h.jsx)("div",{className:"horizontal",style:{"margin-top":"1em","margin-bottom":"1em"}}),Object(h.jsxs)("div",{style:{"max-width":"600px"},children:[Object(h.jsx)(b,{dData:e,remove_dData:this.remove_dData}),Object(h.jsx)("h3",{children:"Add new entry!"}),Object(h.jsx)(w,{handleSubmit:this.handleSubmit})]}),Object(h.jsx)("div",{className:"horizontal",style:{"margin-top":"1em","margin-bottom":"1em"}}),Object(h.jsx)("p",{style:{textAlign:"center"},children:" Here are all the found dandelion seeds so far! "}),Object(h.jsxs)(C.a,{className:"map",center:[51.5072,-.118092],zoom:10,style:{height:500,width:"100%"},children:[Object(h.jsx)(k.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),this.state.marker.map((function(e){return Object(h.jsx)(I.a,{position:e,icon:new T.a({iconUrl:S,iconRetinaUrl:S,iconSize:[65,65]})},Math.random())}))]})]})}}]),n}(a.Component);n(74);i.a.render(Object(h.jsx)(N,{}),document.getElementById("root"))}},[[75,1,2]]]);
//# sourceMappingURL=main.11c1f330.chunk.js.map